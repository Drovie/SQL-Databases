# SQL-скрипты по созданию базы данных

### В папке main содержатся основне скрипты:
- lab_2 - скрипт по созданию схемы, таблиц и связей между ними
- lab_2_inserts содержит код для записи тестовых данных в таблицу


### Директория procedures содержит код 8 хранимых процедур
Реализованные функции:
- add_product - Добавление нового товара;
- add_order_to_cont - Создание нового заказа к существующему договору;
- contract_and_order - Создание нового договора и заказа к нему;
- company_order_sum - Отбор заказов выбранной фирмы с итоговой суммой по каждому заказу;
- contract_total_price - Рассчёт сумм, полученных по выбранному договору;
- delivery_on_date - Формирование списка доставок на указанную дату;
- exp_ord - Отбор заказов, не выполненных на определённую дату;
- sales_volume - Определение объёмов продаж указанного товара.


### В директории triggers расположен код для 8 триггеров
Реализованные функции:
- trigger#1 - триггер для расчета общей цены заказа, может работать при добавлении товара или обновлении товара;
- trigger#2 - триггер для расчета даты окончания контракта, при вводе его продолжительности (продолжительность указывается в днях);
- trigger#3 - триггер для учета численности товара на складе. При добавлении товара в заказ его численность должна уменьшаться;
- trigger#4 - триггер для расчета % скидки. Скидка устанавливается в зависимости от полученной суммы заказа;
- trigger#5 - триггер для расчета цены доставки. Определяется в зависимости от Товара и Транспорта;
- trigger#6 - триггер для расчета суммы оплаты работы сотрудника. Сумма рассчитывается как процент от суммы заказа;
- trigger#7 - триггер для расчета средней цены товара;
- trigger#8 - триггер для расчета средней цены заказа.


## Запуск
- На локальной инстанции запустить lab_2.sql посредством MySQL. Для удобства рекомендуется использовать графический интерфейс MySQL Workbench.
- После завершения работы скрипта запустить lab_2_inserts.sql
База данных создана, можно написать несколько запросов к ней для проверки
Например, такой:
--> select * from products

Для создания хранимых процедур - запустить соответствующий скрипт из папки procedures
Для проверки работы обратиться к процедуре по аналогии с примерами, записанными в  комментариях к коду процедур.
